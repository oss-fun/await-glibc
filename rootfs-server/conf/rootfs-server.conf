server {
	listen 80;
	server_name _;
	
	location / {
		autoindex on;
		autoindex_exact_size off;
		autoindex_localtime on;
		absolute_redirect off;

		# バイナリファイル転送の設定
		if ($request_filename ~* \.tar\.gz$) {
			add_header Content-Type application/x-gzip;
			add_header Content-Disposition attachment;
			gzip off;
		}

		# バッファリング設定
		client_max_body_size 1000M;
		client_body_buffer_size 128k;

		# タイムアウト設定
		send_timeout 300;

		# バイナリ転送の最適化
		tcp_nopush on;
		tcp_nodelay on;
	
		error_log /var/log/nginx/error.log;
		access_log /var/log/nginx/access.log;

		root /app/data;

		types {
			application/x-gzip tar.gz;
		}
	}
}
